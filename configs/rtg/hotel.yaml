use_wandb: False
use_sky: False
use_dynamic: False
use_loop: True
use_pose_refine: False
use_metric: True

mode: 'vo' # 'vo' or 'vio' or 'vo_nerfslam'


device:
  tracker: 'cuda:0'
  mapper: 'cuda:0'

dataset:
  root: /data/wuke/DATA/2023/RTG-SLAM/hotel/
  module: datasets.rtgslam
  rgb_strip: 1

middleware:
  cov_times: 100
  max_cov: 1e4
  max_depth: 6

output:
  save_dir: /data/wuke/workspace/September/VINGS-Mono/output/

intrinsic: # H, W, intrinsic就用原始的哈
  H: 720
  W: 1280
  fu: 605.371
  fv: 605.371
  cu: 366.510 # cy
  cv: 635.3085 # cx
  resolution_scale: 1.0
  bg: 0

frontend:
  # DBAFusion
  weight: /data/wuke/workspace/VINGS-Mono/ckpts/droid.pth
  image_size: [344, 616]
  buffer: 80
  filter_thresh: 2.4
  c2i: None
  # DBAFusionFrontend
  # visual_only: 0 # 0 means VIO and 1 means VO.
  warm_up: 8
  beta: 0.3
  frontend_nms: 1
  keyframe_thresh: 4.0
  frontend_window: 5
  frontend_thresh: 4.0 # 4.0
  frontend_radius: 2
  active_window: 12
  # CovisibleGraph
  max_factors: 48
  far_threshold: 0.02
  inac_range: 3
  mask_threshold: -1.0
  skip_edge: [-4,-5,-6]
  translation_threshold: 0.3 # 0.5 
  # Vis.
  show_plot: False

adc_args:
  accum_thresh: 0.98
training_args:
  num_keyframe: 8
  iters: 50
  lr: # Copy form 2DGS.
    _xyz_lr: 0.00002
    _rgb_lr: 0.0001 # 0.0025
    _opacity_lr: 0.02
    _scaling_lr: 0.001
    _rotation_lr: 0.001
  loss_weights:
    rgb_loss: 1.0
    depth_loss: 1.0
    alpha_loss: 0.5  # 10.0
    normal_loss: 0.05 # 0.05
    dist_loss: 0.0
    smooth_loss: 0.0

use_vis: True
vis:
  # vo
  # bev_w2c: [[ 4.05583909e-02,  4.81508139e-01, -8.75502672e-01, -5.30837468e-02],
  #           [-9.96537512e-01,  8.31432172e-02, -4.38402075e-04, 2.36458792e-01],
  #           [ 7.25810147e-02,  8.72489036e-01,  4.83213078e-01, 2.60963384e+00],
  #           [ 0.00000000e+00,  0.00000000e+00,  0.00000000e+00, 1.00000000e+00]]
  # vo_metric
  bev_w2c: [[ 4.05583909e-02,  4.81508139e-01, -8.75502672e-01, -5.30837468e-02],
            [-9.96537512e-01,  8.31432172e-02, -4.38402075e-04, 2.36458792e-01],
            [ 7.25810147e-02,  8.72489036e-01,  4.83213078e-01, 15.60963384e+00],
            [ 0.00000000e+00,  0.00000000e+00,  0.00000000e+00, 1.00000000e+00]]
  bev_intrinsic_dict:
    H: 758
    W: 1372
    fu: 656.44725606860459
    fv: 656.44725606860459
    cu: 378.5 # cy
    cv: 685.5 # cx
  pose_scale: 0.18



# 2024/10/01
use_storage_manager: False


looper:
  lightglue_weight_dir: /data/wuke/workspace/September/VINGS-Mono/ckpts/lightglue/
  onnx_w: 512
  H: 344
  W: 616
  # nearest_k_frame: 10
  loop_radius: 15
  is_loop_min_match_num: 45
  search_num: 30
  is_loop_mse_threshold: 0.15 # 0.18
  is_loop_med_times: 100.0
